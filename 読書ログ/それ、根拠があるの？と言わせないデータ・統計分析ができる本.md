# それ、根拠があるの？と言わせないデータ・統計分析ができる本
## 柏木　吉碁
### 目的
- データの使い方
- 統計・分析の使い方
---
1. ### データを見せる
    - 伝える事を理解する
    - 目的→**仮説**→手段で伝える
    - 仮説を確認するのが「データ分析」
    - 仮説が必要な理由
        - 無駄な分析を避ける  
        時間を労力を無駄にしない。
        - 分析の目的が明確になる  
        分析結果が目的に貢献するようになる。
        - 大局的な観点でストーリーを作りやすい  
        目的に対する多面的・大局的な視点で説得力をつける。
    - 仮説アプローチの注意点
        - 見えない課題を見逃す
        目的ありきで検証するため、大切なデータを見逃すことがある。
        - 確証バイアス
        思い込みで仮設を立証、または偏った分析をしてしまう。
            - 業界全体ではなく、自社のみの仮説
            - データの精度の信憑性の誤り
    - 仮説を分析につなげるための４つのポイント
        - MECE（漏れなくダブりなく）  
        フレームワークを使って漏れ・ダブりを無くす。
            - 4P
                - Product
                - Price
                - Place
                - Promotion
            - 3C
                - Costomer
                - Company
                - Competitor
        - 現状の制約条件に捉われない  
        「～したことがない」であきらめず、外部も含めて力を借りる
        - 複数の仮説を立てる
        - 最初から１００点を狙わない
    - 仮説を検証するために、ロジックツリーを使う
        - 第１段階　目的
        - 第２段階　仮説
        - 第３段階　手段
    - ラフな分析・詳細の分析
        - 仮説作りのための分析  
        当たりを付けて、可能性を探る。
        - 仮説を立証するための分析  
        可能性がある加越を詳細に分析する。
1. ### データの集め方
    - 目的→仮説→手段のロジックツリーから欲しいデータを定義する
    - 仮説の一歩手前のデータを集める
        - ドンピシャのデータがあればいいが、そうそう無い
        - 仮説の１歩手前のデータは、広い視野でデータを取得しやすい
            - 同類他社のデータ
            - 各地区・拠点
            - 月次のデータに日次データを入れる　など
    - データの軸  
    データを取得する切り口  
        - 時間  
        - 場所
        - 商品群
        - 顧客の年齢層　など
    - データの軸で分割・まとめる
        - 境目を細かく分解すると、詳細を見せることができる
        - 適度な分解が必要
            - 分解する細かさに意味を持つ  
            同じデータを何回も分析することは、時間と労力をつかう。
            - 特例のデータに注意する  
            ゴミ、特殊なイベントで発生したデータは分析には向かない。
    - データの範囲
        - 時間別、日次、週次、月次など、データの意味を範囲で示す
        - 範囲については正解がないため、目的に合った範囲を適用する
        - 集計範囲をマクロからミクロにして分析するすることで、範囲による影響を見過ごさないリスクヘッジになる
    - 外れ値は理由を考えて処理する
        - 外れ値とは、データの散布図から特出したデータのこと
        - 外れ値があると、平均に大きく影響を及ぼす
        - 外れ値を範囲外にするためには、理由を調査する
    - データが少ないとき、データを加工する
        - 絶対値を比率に変える

    |カテゴリー|例|
    |:--|:--|
    |単位当たりの比率|人口当たり
    ||世帯当たり|
    ||従業員１人当たり|
    ||年（年（月、週、日））当たり|
    ||売上当たり|
    ||？？？円当たり|
    |属性による比率|平米当たり|
    ||男女比|
    ||べ当たり|
    ||世帯当たり|
    |時間による比率|前年同期比|
    ||年度平均|
    |ほかとの比較|競合比|
    ||他国比|
    ||業界比|

1. ### 平均、中央値
    - 平均
        - 全体の数量を個数で割った値  
        - 代表的な値を決めることで、全体の規模を見積もる  
        #### ```規模＝価格の平均値×個数```
        - データのバラつきには注意が必要
        - データのカテゴリ別の平均でバラつきを確認して使用すること
    - 中央値
        - データの集合を昇順に並べて、真ん中の値
        - 真ん中より上位、または下位を集計する  
        #### ```下位のデータ＝価値の中央値より小さいデータ```
        - 平均では、上位・下位を判定できない（してはいけない）
    - 平均値と中央値の差
        - 差が少ないときは、平均を代表値として問題ない
        - 差が大きいときは、外れ値（極端な値）があるので、合理性の有無を検証する
    - 使用例
        - 要員の単価平均額が中央値と差が少ないことを確認する  
        - 目標売上予算＝要員の単価平均額×要員数  
        ```全体で見積もってもいいが、地域ごとに分けて計算すると、より精度があがる```
        - 目標利益額＝要員の単価平均額×利益率  
        ```上記の場合、利益率は全員統一とする```
        - 目標投入要員数＝目標売上予算÷目標利益額  
        ```予算必達のための要員の人数```
1. ### 標準偏差
    - 複数のデータのバラつきを示す統計手法  
        - #### ```偏差＝各データ―平均値```
        - #### ```分散＝（偏差）＊２乗の合計÷データの数```
        - #### ```標準偏差＝√分散```
    - 標準偏差の使い方
        - 平均との差が少ないとき、代表的な値と判断する
        - 平均との差が大きいとき、リスクが大きいと判断する
    - 実際に使うとき
        - 標準偏差をそのまま使うのは難しい
            - 世の中のデータは、全て正規分布していない  
            分布しているか、偏りがあるか
            - 正規分布していても、明確な範囲の意味付けができなければならない  
            - 規模が異なるデータ間の比較が難しい  
            比較対象でデータ数の差があると、正しい結果がでない
        - 使う方法
            - 同じ前提で相対的に比較する  
            支店で前月○○、今月△△、翌月■■・・・のように、同じ前提で比較する。  
            同じ規模の店舗、同じ商品、同じ営業担当者　など  
            - 異なる規模でも平均から外れているリスクが多いか  
            個々のデータと平均がどのくらい離れているか＝リスク、として見る。  
            #### ```標準化係数＝（データ―平均）÷標準偏差```  
            いわゆる偏差値のこと  
            - 異なる環境で、それぞれの平均と標準偏差に差がないとき、同じ条件として比較できる
    - リスク評価
        1. バラつきをリスクとして評価
            - 相対評価
                - ほかのデータと比べて、バラつきが大きい＝リスク
                - リスクはマイナス面だけでなく、プラス面もある  
                ex. ハイリスク、ハイリターン
            - 起こりうるバラつきを数値化
                - リスクを測りたいとき、他のデータと比べて近いリスクがあるか調べる
                    - 今回のデータ、他のデータそれぞれの、平均、標準偏差を求める
                        - 近似値であれば、近いリスクがある
                        - 数値が離れていれば、他のデータは参考にならない
        1. ヒストグラムでバラつきを視覚化
            - ヒストグラムとは
                - 横軸にデータ値の範囲
                    - 例えば、1～10、11～20のようにデータ値の範囲を設定する
                    - データ値の範囲はすべて均一
                    - データ値の範囲の個数は、どういう見せ方にするかによる
                        - データ値の範囲が大きいと、左右のデータ差がはっきり見えるが、データの特徴が紛れ込んでしまう
                        - データ値の範囲が少ないと、全体のバラつきが細かく見えるが、全体の特徴が見にくい
                        - どちらがいいか正解はないので、目的やケースで使い分ける
                - 縦軸に横軸のデータ値の個数
        1. データの下振れ、上振れから、リスクを示す
            - 極端にデータが減る場合、そこを境界線としてデータの説明ができる
            - 極端にデータが増える場合、平均から離れいても実現可能性が高いデータと説明できる
            - 広くリスクを捉える場合、データの最小値と最大値が含まれる範囲のデータを見る
    - 標準偏差の使い方
        - 平均に隠されたバラバラのデータを見せたいとき
        - データの値がバラバラなのをシンプルに表現したいとき
        - 「平均で～です」という主張に、裏どりをする
        - 平均だけでは物足りない、しっくりこない
        - データが平均周辺に偏っているとは限らないことを確認する
1. ### 相関分析
    - データ同士の結びつきを相関という  
    ex. データAに対して、データBとデータCがある。
    - 相関係数  
    方程式の「y = ax + b」のように、xが増加するとyも増加、もしくは減少する。  
    
    |相関係数|相関|
    |:---:|:---:|
    |-1～-0.7|強い負の相関|
    |-0.7～-0.-5５つの|負の相関|
    |-0.5～0.5|相関なし|
    |0.5～0.7|正の相関|
    |1～0.7|強い正の相関|    
    - 散布図  
    相関係数で方程式に値を入れて変化した値をドットで表したもの。  
    相関係数＝ExcelのCORRELを使用する。  
    - 相関に関するデータ  
        - ２つのデータに直接的な関係があるデータ
        - 相関関係に間接的に関係がありそうな場合、直接的な関連があるデータに切り替える
    - 相関を扱うときの注意点
        - データに関して思考停止しない
            - そのまま使う前に、運用を想像して、扱うデータの妥当性を考える
        - 単なるデータの偶然
            - たまたま同じ傾向だったと疑う
        - 単に関連があるデータ
            - 身長と足のサイズのように、元々関連があるデータは付加価値がない
        - 疑似相関かも
            - 見せかけの相関で、直接的な相関はない
        - 第三の要因を媒介した相関
            - 直接的な相関をすると誤った相関が発生する
            - 間に「～なので」を入れて、理由となるそうん
        - 因果関係の有無
            - 時間的な相関  
                - 原因と結果が逆転していないか気をつけよう
            - 一般性
                - 環境や場所など、条件や環境を変えても同様の結果が得られるか、確かめてみよう
            - しきい値
                - 原因データがしきい値を超えた場合、結果が反応するか確認しよう
            - 常識
                - 自分に刷り込まれたバイアスがある事を認識し、思い込みを排除しよう
                - 常識
        - 原因と結果を逆に
            - 相関関係があると原因と結果が逆になってしまうことがある  
            解釈に気をつけよう
        - 原因は１つだけじゃない
        - 見るデータの範囲で相関が変わることを認識する
            - 昔のデータと最近のデータで結果が異なることがある  
            データをそのまま使うのではなく、目的に合ったデータを使おう
        - 外れ値があると相関係数が変わる
            - 散布図を使って外れ値があるか確認する  
            ただし、外れ値が必ず相関係数を狂わすわけではない  
            目的によって外れ値を有効とするか考える  
        - データの要素に注目する
            - データを一緒くたで見ると、誤った相関を見てしまう
            - データに分解できる要素があるのか確認する
            - 他人の意見を聞く
        - たくさんの選択肢を持つ
            - 目的に合った有効なロジックを選ぶ
                - 散布図に境界線をつけて、目的のエリアのデータを抽出する
                - 目に見えるデータの属性だけではなく、他の属性も含める
1. ### 単回帰分析
    - 数式
        - y = ax + b（aとbは定数）
        - 相関関係にあるxデータとyデータの数値的な関係を導き出すのが**```単回帰分析```**
        - 
